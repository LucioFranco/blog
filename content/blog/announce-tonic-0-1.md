---
title: "Tonic: gRPC has come to async/await!"
url: "/tonic-grpc-has-come-to-async-await"
date: 2019-10-01T10:00:00-04:00
draft: false
---

# Tonic: gRPC has come to async/await!

I am pleased to finally announce a crate that I have been working very hard on for the
past few months. [`tonic`] has finally hit the initial [`0.1.0-alpha.1`] release! Stable
releases will follow in the coming months.

### What is Tonic?

> Tonic is a gRPC-over-HTTP/2 implementation focused on high performance, interoperability, and flexibility. This library was created to have first class support of async/await and to act as a core building block for production systems written in Rust.

Tonic's prior incarnation was known as [`tower-grpc`]. It was built to satisfy [linkerd]'s need for a production-ready gRPC implementation. [`tower-grpc`] was based upon the [`tower`] library, which has production uses in systems such as the [`linkerd-proxy`], [`vector`], and the [`noria`] database at MIT. The [`tower`] library has also seen usage in additional libraries such as  [`warp`], [`tower-web`], and [`actix-net`].

With async/awaitâ€™s forthcoming stabilization, we created Tonic to support the new syntax natively. This means clients will support async/await out of the box and server
implementations can be defined via [`async_trait`]s. This provides an unparalleled experience for
writing async services quickly and efficiently. Not only does Tonic provide a fully featured gRPC implementation but it also comes with a fully featured, batteries-included, HTTP/2 client and server built
around [`hyper`], [`tokio`]and [`tower`]. Both the client and server implementation provide TLS backed by
either [`openssl`] or [`rustls`]. The client provides load balancing, interceptors, timeouts, rate limiting,
concurrency control and more!

The library also boasts strong interoperability with [`grpc-go`] which contains tests for the majority of supported gRPC features. If you find a bug or would like to request a new feature please file an [issue]!

### Features

Out of the gate, the goal for Tonic has been to provide a good batteries included experience. It
already supports many features, with many more planned! Here is a list of features:

- Implemented in pure Rust (minus [`openssl`] which is optional)
- Interoperability tested via [`tonic-interop`]
- Bi-directional streaming
- Custom metadata
- Trailing metadata
- Codegen via [`prost`]
- Exposes [`tracing`] diagnostics (more to come)
- Fully featured HTTP/2 client and server
- TLS backed by either [`openssl`] or [`rustls`]
- Load balancing powered by [`tower`]
- Reliability features such as timeouts, rate limiting, concurrency control, and more
- gRPC interceptors
- And much more to come

### Overview

_helloworld **client** example:_

{{< highlight rust >}}
let mut client = GreeterClient::connect("http://[::1]:50051")?;
let request = Request::new(HelloRequest {
    name: "hello".into(),
});
let response = client.say_hello(request).await?;
println!("RESPONSE={:?}", response);
{{< /highlight >}}

This shows how easy it is to build a simple gRPC client using code generated by [`tonic-build`]. Internally,
`connect` will create the most basic "channel/client" but it is possible to configure this to support
tls, load balancing, timeouts and more.

_helloworld **server** example:_

{{< highlight rust >}}
#[tonic::async_trait]
impl Greeter for MyGreeter {
    async fn say_hello(&self, req: Request<HelloRequest>)
        -> Result<Response<HelloReply>, Status>
    {
        println!("Got a request: {:?}", req);
        let reply = HelloReply {
            message: "Zomg, it works!".into(),
        };
        Ok(Response::new(reply))
    }
}
{{< /highlight >}}

Servers are just as easy to implement! Using [`dtolnay`]'s amazing [`async_trait`] crate
to allow server implementations to use `async fn` in a trait. More examples including ones with TLS, authentication, and streaming are included in the [`tonic-examples`] crate.

### Moving forward

Today marks Tonic's first alpha release, over the next few months we will be working hard
to ensure that Tonic is ready for production usage. A lot of the implementation has already
been proven in production environments via [`tower-grpc`]. Over the next few months as [`tokio`]
comes closer to a full stable release Tonic will follow with its own stable releases.

### Conclusion

[`tonic`] is now available! There is [documentation], [examples][`tonic-examples`] and
an [issue] tracker! Please provide any feedback, as we would love to improve this library
any way we can!

Thank you to all the super awesome contributors that have helped over the past few months! Your
feedback has been immensely important and valuable!

[`tonic`]: https://github.com/hyperium/tonic
[issue]: https://github.com/hyperium/tonic/issues/new
[`hyper`]: https://github.com/hyperium/hyper
[`tower`]: https://github.com/tower-rs/tower
[`tokio`]: https://github.com/tokio-rs/tokio
[`tracing`]: https://github.com/tokio-rs/tracing
[`rustls`]: https://github.com/ctz/rustls
[`openssl`]: https://github.com/sfackler/rust-openssl
[`prost`]: https://github.com/danburkert/prost
[`tower-grpc`]: https://github.com/tower-rs/tower-grpc
[`0.1.0-alpha.1`]: https://crates.io/crates/tonic/0.1.0-alpha.1
[`async_trait`]: https://crates.io/crates/async-trait
[`dtolnay`]: https://github.com/dtolnay
[linkerd]: https://linkerd.io/
[`vector`]: https://github.com/timberio/vector
[`linkerd-proxy`]: https://github.com/linkerd/linkerd2-proxy
[`tonic-interop`]: https://github.com/hyperium/tonic/tree/master/tonic-interop
[`tonic-build`]: https://github.com/hyperium/tonic/tree/master/tonic-build
[`tonic-examples`]: https://github.com/hyperium/tonic/tree/master/tonic-examples
[`warp`]: https://github.com/seanmonstar/warp
[`tower-web`]: https://github.com/seanmonstar/warp
[`actix-net`]: https://github.com/actix/actix-net
[`noria`]: https://github.com/mit-pdos/noria
[`grpc-go`]: https://github.com/grpc/grpc-go
[documentation]: https://docs.rs/tonic/0.1.0-alpha.1/tonic/
[`tower`]: https://github.com/tower-rs/tower
